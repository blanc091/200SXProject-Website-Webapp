function scrollToElement(n){var t=document.getElementById(n);t?t.scrollIntoView({behavior:"smooth"}):console.error(`${n} not found!`)}document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll(".delete-comment-link");n.forEach(n=>{n.addEventListener("click",t=>{t.preventDefault();const i=n.closest("form");i&&i.submit()})})});document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector('a[asp-controller="Home"][asp-action="Index"][asp-fragment="posts"]'),t="/home/index";n&&n.addEventListener("click",function(n){if(window.location.pathname.toLowerCase()===t.toLowerCase()||window.location.pathname==="/"){n.preventDefault();const t=document.getElementById("posts");t&&t.scrollIntoView({behavior:"smooth"})}})});document.addEventListener("DOMContentLoaded",function(){function t(){var n=document.getElementById("contactForm");n?n.scrollIntoView({behavior:"smooth"}):console.error("Contact form not found!")}var c=document.body.getAttribute("data-item-added"),l=document.body.getAttribute("data-is-form-submitted"),a=document.body.getAttribute("data-is-form-success"),i=document.body.getAttribute("data-is-user-logged-in"),v=document.body.getAttribute("data-is-form-register-success"),y=document.body.getAttribute("data-is-email-verified-login"),p=document.body.getAttribute("data-is-user-verified"),r=document.body.getAttribute("is-entry-success"),w=document.body.getAttribute("data-user-exists"),u=document.body.getAttribute("data-is-pass-reset-email-sent"),b=document.body.getAttribute("data-is-pass-reset-success"),k=document.body.getAttribute("data-is-newsletter-subbed"),d=document.body.getAttribute("data-is-newsletter-error"),g=document.body.getAttribute("data-is-nice-try"),n=l==="True",f=a==="True",nt=document.body.getAttribute("data-is-comment-posted"),tt=document.body.getAttribute("data-unsubscribed"),e=document.body.getAttribute("data-is-user-deleted"),it=document.body.getAttribute("data-is-contact-error"),o=document.body.getAttribute("data-is-comment-deleted"),s=document.body.getAttribute("data-is-build-submitted"),h=document.body.getAttribute("data-is-checkout-validated");console.log("Current Pathname:",window.location.pathname);window.location.pathname.startsWith("/detailed-user-build")&&scrollToElement("detailedViewSection");window.location.pathname.startsWith("/products/detailed-product-view")&&scrollToElement("detailedProductViewSection");window.location.pathname.startsWith("/checkout/your-order")&&scrollToElement("orderSuccess");switch(window.location.pathname){case"/mainten-app":scrollToElement("maintenApp");break;case"/login-page":scrollToElement("header");break;case"/reset-password":case"/forgot-my-password":case"/reset-my-password":case"/newsletter/create-newsletter-admin":scrollToElement("maintenApp");break;case"/register-new-account":scrollToElement("registerFormSpan");break;case"/register-an-account":scrollToElement("registerFormSpan");break;case"/login":scrollToElement("loginField");break;case"/newsletter/subscribe":scrollToElement("newsletterFormSpan");break;case"/add-new-build":scrollToElement("addBuild");break;case"/user-builds":scrollToElement("userBuildsHeader");break;case"/products/view-products":scrollToElement("productsDash");break;case"/cart/view-cart":scrollToElement("cartView");break;case"/checkout/view-checkout":scrollToElement("checkoutView");break;case"/checkout/place-order":scrollToElement("checkoutView");break;case"/pendingorders/get-all-orders-admin":scrollToElement("ordersAll");break;case"/account/user-profile":scrollToElement("userProfileDash");break;case"/pendingorders/view-my-orders":scrollToElement("customerOrders");break;case"/cart/remove-cart-item":scrollToElement("cartView");break;case"/account/delete-account-confirmation":scrollToElement("userProfileDashDelete");break;case"/account/admin-dashboard":scrollToElement("adminInterfaceHeader");break;case"/submit-build":scrollToElement("Title");break;case"/products/add-product-interface":scrollToElement("addProduct");break;case"/contact/send-email":scrollToElement("ContactForm")}(i&&!n||n&&f||it=="yes"||v=="yes"||y=="yes"||p=="no"||b=="yes"||r=="yes"||r=="no"||w=="yes"||g=="yes"||k=="yes"||nt=="yes"||i=="no"||tt=="yes"||h=="yes"||h=="no"||e=="yes"||e=="no"||s=="yes"||s=="no"||c=="yes"||o=="yes"||o=="no"||d=="yes"||u=="yes"||u=="no")&&setTimeout(function(){$("#messageModal").fadeOut(1250)},3e3);n&&!f&&t();window.location.pathname!="/account/login-account"&&window.addEventListener("scroll",function(){var n=document.getElementById("intro");n&&(window.scrollY>0?n.classList.add("hidden"):n.classList.remove("hidden"))});fetch("/api/is-logged-in").then(n=>n.json()).then(n=>{n&&window.location.pathname==="/"&&(scrollToElement("posts"),$("#tibi").css("display","flex"))});$(document).ready(function(){const i=new URLSearchParams(window.location.search);i.has("scrollToContactForm")&&t();var n=document.getElementById("contactLink");n&&n.addEventListener("click",function(n){n.preventDefault();window.location.pathname==="/home/index"?t():window.location.href="/home/index?scrollToContactForm=true"})})});document.addEventListener("DOMContentLoaded",function(){var n=document.getElementById("logoutLink");console.log("DOM fully loaded and parsed");n?n.addEventListener("click",function(n){console.log("Logout link clicked");n.preventDefault();var t=document.querySelector('input[name="__RequestVerificationToken"]').value;fetch("/loginregister/logout",{method:"POST",headers:{"Content-Type":"application/json",RequestVerificationToken:t}}).then(n=>{n.ok?(console.log("Logout successful"),window.location.href="/"):console.error("Logout failed")}).catch(n=>{console.error("Error:",n)})}):console.log("Logout link not found or user not logged in.")});document.addEventListener("click",function(n){if(n.target.matches(".save-btn")&&n.target.id!=="closePopup"){n.preventDefault();const t=n.target.closest("tr");if(!t){console.error("Row not found");return}const i=t.dataset.orderId,r=t.querySelector(".status-input").value,u=t.querySelector(".carrier-input").value,f=t.querySelector(".email-cell")?t.querySelector(".email-cell").textContent.trim():"",e=t.querySelector(".tracking-number-input").value;fetch("/pendingorders/update-order-tracking",{method:"POST",headers:{"Content-Type":"application/json",RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value},body:JSON.stringify({orderId:i,email:f,status:r,carrier:u,trackingNumber:e})}).then(n=>{if(n.ok)alert("Order tracking updated successfully!");else return n.text().then(n=>{throw new Error(n);})}).catch(n=>{alert(n.message)})}if(n.target.matches(".view-cart-btn")){const t=n.target.dataset.orderId;(()=>{try{const n=await fetch(`/pendingorders/get-cart-items?orderId=${t}`);if(n.ok){const t=await n.json(),i=document.getElementById("cartItemsTable"),r=document.getElementById("cartItemsPopup");i.innerHTML=t.map(n=>`
                        <tr>
                            <td>${n.productName}</td>
                            <td>${n.quantity}</td>
                            <td>${n.price}</td>
                        </tr>`).join("");r.style.display="block"}else alert("Failed to fetch cart items. Please try again.")}catch(n){console.error("Error fetching cart items:",n);alert("An error occurred. Please try again.")}})()}if(n.target.matches(".view-details-btn")){const t=n.target.dataset.orderId;fetch(`/pendingorders/get-user-orders-json?orderId=${t}`).then(n=>{if(n.ok)return n.json();throw new Error("Error fetching order details");}).then(n=>{console.log("Received order details:",n);let t="",r=Array.isArray(n)?n[0]:n,i=r.orderPlacements||r.OrderPlacements;if(i&&i.length>0){const n=i[0];let r="",u=n.orderDate||n.OrderDate;if(u){const n=new Date(u),t=n.getDate().toString().padStart(2,"0"),i=(n.getMonth()+1).toString().padStart(2,"0"),f=n.getFullYear(),e=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),s=n.getSeconds().toString().padStart(2,"0");r=`${t}/${i}/${f} ${e}:${o}:${s}`}t+=`<p><strong>Full Name:</strong> ${n.fullName||n.FullName}</p>`;t+=`<p><strong>Address Line 1:</strong> ${n.addressLine1||n.AddressLine1}</p>`;t+=`<p><strong>Address Line 2:</strong> ${n.addressLine2||n.AddressLine2}</p>`;t+=`<p><strong>City:</strong> ${n.city||n.City}</p>`;t+=`<p><strong>County:</strong> ${n.county||n.County}</p>`;t+=`<p><strong>Phone Number:</strong> ${n.phoneNumber||n.PhoneNumber}</p>`;t+=`<p><strong>Email:</strong> ${n.email||n.Email}</p>`;t+=`<p><strong>Order Notes:</strong> ${n.orderNotes||n.OrderNotes}</p>`;t+=`<p><strong>Order Date:</strong> ${r}</p>`}else t="<p>No order placement details found.<\/p>";document.getElementById("orderDetailsContent").innerHTML=t;document.getElementById("orderDetailsPopup").style.display="block"}).catch(n=>{console.error("Error loading order details:",n),alert("Error loading order details: "+n.message)})}n.target.matches("#closePopup")&&(document.getElementById("cartItemsPopup").style.display="none");n.target.matches("#closeOrderDetailsPopup")&&(document.getElementById("orderDetailsPopup").style.display="none")});document.addEventListener("DOMContentLoaded",function(){const n=Intl.DateTimeFormat().resolvedOptions().timeZone;document.cookie=`userTimeZone=${n}; path=/`});