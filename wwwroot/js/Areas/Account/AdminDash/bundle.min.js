function scrollToElement(n){var t=document.getElementById(n);t?t.scrollIntoView({behavior:"smooth"}):console.error(`${n} not found!`)}document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll(".delete-comment-link");n.forEach(n=>{n.addEventListener("click",t=>{t.preventDefault();const i=n.closest("form");i&&i.submit()})})});document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector('a[asp-controller="Home"][asp-action="Index"][asp-fragment="posts"]'),t="/home/index";n&&n.addEventListener("click",function(n){if(window.location.pathname.toLowerCase()===t.toLowerCase()||window.location.pathname==="/"){n.preventDefault();const t=document.getElementById("posts");t&&t.scrollIntoView({behavior:"smooth"})}})});document.addEventListener("DOMContentLoaded",function(){function t(){var n=document.getElementById("contactForm");n?n.scrollIntoView({behavior:"smooth"}):console.error("Contact form not found!")}var h=document.body.getAttribute("data-item-added"),c=document.body.getAttribute("data-is-form-submitted"),l=document.body.getAttribute("data-is-form-success"),i=document.body.getAttribute("data-is-user-logged-in"),a=document.body.getAttribute("data-is-form-register-success"),v=document.body.getAttribute("data-is-email-verified-login"),y=document.body.getAttribute("data-is-user-verified"),r=document.body.getAttribute("is-entry-success"),p=document.body.getAttribute("data-user-exists"),u=document.body.getAttribute("data-is-pass-reset-email-sent"),w=document.body.getAttribute("data-is-pass-reset-success"),b=document.body.getAttribute("data-is-newsletter-subbed"),k=document.body.getAttribute("data-is-newsletter-error"),d=document.body.getAttribute("data-is-nice-try"),n=c==="True",f=l==="True",g=document.body.getAttribute("data-is-comment-posted"),nt=document.body.getAttribute("data-unsubscribed"),e=document.body.getAttribute("data-is-user-deleted"),tt=document.body.getAttribute("data-is-contact-error"),o=document.body.getAttribute("data-is-comment-deleted"),s=document.body.getAttribute("data-is-build-submitted");console.log("Current Pathname:",window.location.pathname);window.location.pathname.startsWith("/detailed-user-build")&&scrollToElement("detailedViewSection");window.location.pathname.startsWith("/products/detailed-product-view")&&scrollToElement("detailedProductViewSection");window.location.pathname.startsWith("/checkout/your-order")&&scrollToElement("orderSuccess");switch(window.location.pathname){case"/mainten-app":scrollToElement("maintenApp");break;case"/login-page":scrollToElement("header");break;case"/reset-password":case"/forgot-my-password":case"/reset-my-password":case"/newsletter/create-newsletter-admin":scrollToElement("maintenApp");break;case"/register-new-account":scrollToElement("registerFormSpan");break;case"/register-an-account":scrollToElement("registerFormSpan");break;case"/login":scrollToElement("loginField");break;case"/newsletter/subscribe":scrollToElement("newsletterFormSpan");break;case"/add-new-build":scrollToElement("addBuild");break;case"/user-builds":scrollToElement("userBuildsHeader");break;case"/products/view-products":scrollToElement("productsDash");break;case"/cart/view-cart":scrollToElement("cartView");break;case"/checkout/view-checkout":scrollToElement("checkoutView");break;case"/pendingorders/get-all-orders-admin":scrollToElement("ordersAll");break;case"/account/user-profile":scrollToElement("userProfileDash");break;case"/pendingorders/view-my-orders":scrollToElement("customerOrders");break;case"/cart/remove-cart-item":scrollToElement("cartView");break;case"/account/delete-account-confirmation":scrollToElement("userProfileDashDelete");break;case"/account/admin-dashboard":scrollToElement("adminInterfaceHeader");break;case"/submit-build":scrollToElement("Title");break;case"/products/add-product-interface":scrollToElement("addProduct");break;case"/contact/send-email":scrollToElement("ContactForm")}(i&&!n||n&&f||tt=="yes"||a=="yes"||v=="yes"||y=="no"||w=="yes"||r=="yes"||r=="no"||p=="yes"||d=="yes"||b=="yes"||g=="yes"||i=="no"||nt=="yes"||e=="yes"||e=="no"||s=="yes"||s=="no"||h=="yes"||o=="yes"||o=="no"||k=="yes"||u=="yes"||u=="no")&&setTimeout(function(){$("#messageModal").fadeOut(1250)},3e3);n&&!f&&t();window.location.pathname!="/account/login-account"&&window.addEventListener("scroll",function(){var n=document.getElementById("intro");n&&(window.scrollY>0?n.classList.add("hidden"):n.classList.remove("hidden"))});fetch("/api/is-logged-in").then(n=>n.json()).then(n=>{n&&window.location.pathname==="/"&&(scrollToElement("posts"),$("#tibi").css("display","flex"))});$(document).ready(function(){const i=new URLSearchParams(window.location.search);i.has("scrollToContactForm")&&t();var n=document.getElementById("contactLink");n&&n.addEventListener("click",function(n){n.preventDefault();window.location.pathname==="/home/index"?t():window.location.href="/home/index?scrollToContactForm=true"})})});document.addEventListener("DOMContentLoaded",function(){var n=document.getElementById("logoutLink");console.log("DOM fully loaded and parsed");n?n.addEventListener("click",function(n){console.log("Logout link clicked");n.preventDefault();var t=document.querySelector('input[name="__RequestVerificationToken"]').value;fetch("/loginregister/logout",{method:"POST",headers:{"Content-Type":"application/json",RequestVerificationToken:t}}).then(n=>{n.ok?(console.log("Logout successful"),window.location.href="/"):console.error("Logout failed")}).catch(n=>{console.error("Error:",n)})}):console.log("Logout link not found or user not logged in.")});document.addEventListener("DOMContentLoaded",function(){const n=Intl.DateTimeFormat().resolvedOptions().timeZone;document.cookie=`userTimeZone=${n}; path=/`});document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".btn-save");console.log("Found buttons:",n);n.forEach(function(n){if(n.id==="openProductModal"||n.id==="togglePendingChats"){console.log("Skipping button:",n.id);return}n.addEventListener("click",function(){const t=n.getAttribute("data-href");console.log("Button clicked, target:",t);t?window.location.href=t:console.error("No data-href found on button:",n)})})});$(document).ready(function(){function n(){console.log("Attempting to load product list.");var n=$("#products-api-url").data("products-api-url");if(!n){console.error("Products API URL not found.");return}console.log("Products API URL:",n);$.ajax({url:n,method:"GET",dataType:"json",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(n){var i,t;if(console.log("Products received:",n),i=$("#productListContainer"),!n||n.length===0){i.html("<p>No products found.<\/p>");console.log("No products found.");return}t='<table class="table table-striped">';t+="<thead><tr><th>ID<\/th><th>Category<\/th><th>Name<\/th><th>Price<\/th><th>Action<\/th><\/tr><\/thead><tbody>";$.each(n,function(n,i){console.log("Rendering product:",i);t+="<tr>";t+="<td>"+i.id+"<\/td>";t+="<td>"+i.category+"<\/td>";t+="<td>"+i.name+"<\/td>";t+="<td>"+i.price+"<\/td>";t+='<td><button class="btn-delete-product" data-product-id="'+i.id+'">Delete<\/button><\/td>';t+="<\/tr>"});t+="<\/tbody><\/table>";i.html(t);console.log("Product list rendered successfully.")},error:function(n,t,i){console.error("Error loading product list:",i);$("#productListContainer").html("<p>Error loading products.<\/p>")}})}function t(t){var i,r,u;if(console.log("Initiating deletion for product ID:",t),i=$("#product-delete-url").data("product-delete-url"),!i){console.error("Product delete URL not found.");return}console.log("Product delete URL:",i);r=$('input[name="__RequestVerificationToken"]').val()||"";console.log("Anti-forgery token retrieved:",r);u={productId:t,__RequestVerificationToken:r};console.log("Data payload for deletion:",u);$.ajax({url:i,method:"POST",data:$.param(u),headers:{"X-Requested-With":"XMLHttpRequest"},success:function(t){console.log("Delete result:",t);t.success?(alert("Product deleted successfully."),n()):alert("Error deleting product: "+(t.errors?t.errors.join(", "):"unknown error"))},error:function(n,t,i){console.error("Error during product deletion:",i)}})}console.log("Admin dashboard JS loaded (custom popup version).");$("#openProductModal").click(function(){console.log("openProductModal button clicked.");$("#productModal").show();n()});$("#closeProductModal").click(function(){console.log("closeProductModal button clicked.");$("#productModal").hide()});$("#productListContainer").on("click",".btn-delete-product",function(){var n=$(this).data("product-id");if(console.log("Delete button clicked for product ID:",n),!n){console.error("No product ID found on delete button.");return}confirm("Are you sure you want to delete product "+n+"?")?(console.log("User confirmed deletion for product ID:",n),t(n)):console.log("User canceled deletion for product ID:",n)})});